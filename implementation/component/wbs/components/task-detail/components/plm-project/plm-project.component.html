<div class="plm_table">
  <nz-table #expandTable [nzData]="listOfMapData" nzTableLayout="fixed" [nzShowPagination]="false">
    <thead>
      <tr>
        <th>{{ 'dj-default-编号' | translate }}</th>
        <th>{{ 'dj-default-名称' | translate }}</th>
        <th>{{ 'dj-default-前置任务' | translate }}</th>
        <th>{{ 'dj-pcc-重要程度' | translate }}</th>
        <th>{{ 'dj-pcc-里程碑类型' | translate }}</th>
        <th>{{ 'dj-pcc-计划工期(天)' | translate }}</th>
        <th>{{ 'dj-pcc-计划工时(小时)' | translate }}</th>
        <th>{{ 'dj-default-计划开始时间' | translate }}</th>
        <th>{{ 'dj-default-计划结束时间' | translate }}</th>
        <th>{{ 'dj-default-实际开始日' | translate }}</th>
        <th>{{ 'dj-default-实际完成日' | translate }}</th>
        <th>{{ 'dj-pcc-执行人' | translate }}</th>
        <th>{{ 'dj-pcc-执行角色' | translate }}</th>
        <th>{{ 'dj-default-状态' | translate }}</th>
        <th>{{ 'dj-default-完成率' | translate }}</th>
        <th>{{ 'dj-pcc-准时状态' | translate }}</th>
        <th>{{ 'dj-default-交付物' | translate }}</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let data of expandTable.data">
        <ng-container *ngFor="let item of mapOfExpandedData[data.key]">
          <tr *ngIf="(item.parent && item.parent.expand) || !item.parent">
            <td
              [nzIndentSize]="item.level! * 20"
              [nzShowExpand]="item.children && item.children.length > 0"
              [(nzExpand)]="item.expand"
              [nzLeft]="true"
              (nzExpandChange)="collapse(mapOfExpandedData[data.key], item, $event)"
              style="white-space: nowrap; display: flex"
            >
              {{ item.key }}
            </td>
            <td>{{ item.task_name }}</td>
            <td>{{ item.before_task_no }}</td>
            <td>{{ item.important }}</td>
            <td>{{ item.milestone_type }}</td>
            <td>{{ item.plan_work_days }}</td>
            <td>{{ item.plan_work_hours }}</td>
            <td>{{ item.plan_start_date }}</td>
            <td>{{ item.plan_finish_date }}</td>
            <td>{{ item.actual_start_date }}</td>
            <td>{{ item.actual_finish_date }}</td>
            <td>{{ item.executor_name }}</td>
            <td>{{ item.executor_role }}</td>
            <td>{{ item.task_status }}</td>
            <td>{{ item.complete_rate }}</td>
            <td>{{ item.is_on_schedule }}</td>
            <td>
              <app-project-deliverable
                [deliverable_info]="item.deliverable_info"
              ></app-project-deliverable>
            </td>
          </tr>
        </ng-container>
      </ng-container>
    </tbody>
  </nz-table>
</div>
